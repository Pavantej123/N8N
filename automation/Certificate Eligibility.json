{
  "name": "Certificate Eligibility",
  "nodes": [
    {
      "parameters": {
        "sendTo": "={{ $('Student Details').item.json['Email Address'] }}",
        "subject": "ðŸŽ‰ Congratulations! Youâ€™re Eligible for the Gold Certificate",
        "emailType": "text",
        "message": "=Hello {{ $('Student Details').item.json.Name }},  \nCongratulations! Based on your outstanding performance,  \nyou are eligible for the **Gold Certificate**.  \nKeep up the great work and continue shining! âœ¨ ",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        128,
        -208
      ],
      "id": "35622403-bb2a-473b-a49d-79a61fccf083",
      "name": "Gold Certificate",
      "webhookId": "f81e519d-c5fa-4169-9942-3b962de4dfe9",
      "credentials": {
        "gmailOAuth2": {
          "id": "7J7u93Os4pAvCTDg",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ $('Student Details').item.json['Email Address'] }}",
        "subject": "Good Job! Youâ€™ve Earned the Silver Certificate",
        "emailType": "text",
        "message": "=Hello {{ $('Student Details').item.json.Name }},  \nGreat effort! Based on your results,  \nyou are eligible for the **Silver Certificate**.  \nKeep pushing forward â€” Gold is just one step away! ðŸ… \n",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        128,
        -48
      ],
      "id": "b433bcd2-61cd-4552-81e1-a915749c5ceb",
      "name": "Silver Certificate",
      "webhookId": "f81e519d-c5fa-4169-9942-3b962de4dfe9",
      "credentials": {
        "gmailOAuth2": {
          "id": "7J7u93Os4pAvCTDg",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ $('Student Details').item.json['Email Address'] }}",
        "subject": "Youâ€™re Eligible for the Bronze Certificate",
        "emailType": "text",
        "message": "=Hello {{ $('Student Details').item.json.Name }},  \nWell done! Youâ€™ve qualified for the **Bronze Certificate**.  \nKeep practicing and improving to reach Silver or Gold levels next time! ðŸ’ª\n",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        128,
        112
      ],
      "id": "23cdcc46-3f77-470f-8ee1-331083a9713b",
      "name": "Bronze Certificate",
      "webhookId": "f81e519d-c5fa-4169-9942-3b962de4dfe9",
      "credentials": {
        "gmailOAuth2": {
          "id": "7J7u93Os4pAvCTDg",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ $('Student Details').item.json['Email Address'] }}",
        "subject": "Update on Your Certificate Eligibility",
        "emailType": "text",
        "message": "=Hello {{ $('Student Details').item.json.Name }},  \nThank you for your participation.  \nCurrently, you are **not eligible** for a certificate.  \nTo qualify, complete all tasks, assignments, and quizzes,  \nand improve your marks based on the given criteria.  \nYouâ€™ve got this â€” keep trying! ðŸ’« \n",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        128,
        272
      ],
      "id": "9ddc333d-d17a-4d7b-869f-aea207943ee7",
      "name": "Not Eligible",
      "webhookId": "f81e519d-c5fa-4169-9942-3b962de4dfe9",
      "credentials": {
        "gmailOAuth2": {
          "id": "7J7u93Os4pAvCTDg",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "language": "pythonNative",
        "pythonCode": "monthly_assessment = _items[0][\"json\"]['Monthly Assessment Marks']\ntotal_task = _items[0][\"json\"]['Total tasks completed ']\nquiz_marks = _items[0][\"json\"]['Quiz marks']\ntotal_assignments = _items[0][\"json\"]['Total assignments completed ']\nproject_presentation = _items[0][\"json\"]['Project presentation completed ']\nif monthly_assessment>=80 and total_task == 10 and total_assignments == 10 and quiz_marks>=80 and project_presentation==\"Yes\":\n  return {\"output\":\"Gold Certificate\"}\nelif monthly_assessment in range(60,80) and total_task == 10 and total_assignments == 10 and quiz_marks in range(60,80) and project_presentation==\"Yes\":\n  return {\"output\":\"Silver Certificate\"}\nelif monthly_assessment in range(40,60) and total_task == 10 and total_assignments == 10 and quiz_marks in range(40,60) and project_presentation==\"Yes\":\n  return {\"output\":\"Bronze Certificate\"}\nelse:\n  return {\"output\":\"Not Eligible\"}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -496,
        32
      ],
      "id": "0135356e-2779-41e5-b083-192fbd86c276",
      "name": "Eligibility Check"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.output }}",
                    "rightValue": "Gold Certificate",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "7ebd6a6c-955d-40bf-85ac-567644899f60"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7d740794-988d-49dc-b254-99b1408ead68",
                    "leftValue": "={{ $json.output }}",
                    "rightValue": "Silver Certificate",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "e59b2eac-3ada-4426-8292-3ef82e22e089",
                    "leftValue": "={{ $json.output }}",
                    "rightValue": "Bronze Certificate",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "88ce661e-c783-40ce-87a3-8871d6db5a98",
                    "leftValue": "={{ $json.output }}",
                    "rightValue": "Not Eligible",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -272,
        0
      ],
      "id": "00c1c6a7-e60b-42fe-b832-bda601283b43",
      "name": "Certificate Issue"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "documentId": {
          "__rl": true,
          "value": "1NVMVZhbHCxqDd5I2Aaveokl5efr8-27AYw_vDzq_9Hg",
          "mode": "list",
          "cachedResultName": "Certificate Eligibility Sheet",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1NVMVZhbHCxqDd5I2Aaveokl5efr8-27AYw_vDzq_9Hg/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 399909157,
          "mode": "list",
          "cachedResultName": "form response2",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1NVMVZhbHCxqDd5I2Aaveokl5efr8-27AYw_vDzq_9Hg/edit#gid=399909157"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "typeVersion": 1,
      "position": [
        -736,
        32
      ],
      "id": "4f423617-814f-4eda-9054-9753d707c776",
      "name": "Student Details",
      "credentials": {
        "googleSheetsTriggerOAuth2Api": {
          "id": "YAUqLN4rbPx3V3DC",
          "name": "Google Sheets Trigger account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Eligibility Check": {
      "main": [
        [
          {
            "node": "Certificate Issue",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Certificate Issue": {
      "main": [
        [
          {
            "node": "Gold Certificate",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Silver Certificate",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Bronze Certificate",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Not Eligible",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Student Details": {
      "main": [
        [
          {
            "node": "Eligibility Check",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "f9502a10-2f04-492a-9c07-c7d5be13f762",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "38c8fe0ca90e14ca43d751da199c97ff123f3e85f00b88fff4a53b4359f931ae"
  },
  "id": "vbVviZoeMGLYRE3F",
  "tags": []
}